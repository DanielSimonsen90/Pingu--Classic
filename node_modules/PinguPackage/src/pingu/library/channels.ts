import { Client, TextChannel } from "discord.js";
import { PinguLibrary } from "./PinguLibrary";

export function getChannel(client: Client, guildID: string, channelname: string) {
    var guild = client.guilds.cache.find(guild => guild.id == guildID);
    if (!guild) {
        console.error(`Unable to get guild from ${guildID}`);
        return null;
    }
    var channel = guild.channels.cache.find(channel => channel.name == channelname);
    if (!channel) {
        console.error(`Unable to get channel from ${channelname}`);
        return null;
    }
    return channel as TextChannel;
}
export async function outages(client: Client, message: string) {
    var outageChannel = PinguLibrary.getChannel(client, '756383096646926376', 'outages');
    if (!outageChannel) return PinguLibrary.DanhoDM(client, `Couldn't get #outage channel in Pingu Support, https://discord.gg/Mp4CH8eftv`);
    this.consoleLog(client, message);
    let sent = await outageChannel.send(message);
    return sent.crosspost();
}
export async function DanhoDM(client: Client, message: string) {
    console.error(message);

    let { Danho } = PinguLibrary.Developers(client);
    if (!Danho) return;

    return (await Danho().createDM()).send(message);
}